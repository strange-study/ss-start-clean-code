# Ch04. 주석

- 주석은 언제나 **실패**를 의미한다 - 주석없이는 자신(코드에 담긴 의미)을 표현하지 못해 할 수 없이 주석을 사용한다.
  -> 주석이 필요한 상황에서 역전해 **코드로 의도를 표현할 방법**을 찾는다.

- 주석을 무시하는 이유: "거짓말", 프로그래머들이 주석을 유지하고 보수하는 일은 현실적으로 불가능해서 오래된 주석은 거짓말이 된다.
- 오로지 **코드**만이 **진실**을 말하며, 정보를 제공하는 유일한 출처이다.
- **주석을 가능한 줄이도록 꾸준히 노력**해야 한다.

## 주석은 나쁜 코드를 보완하지 못한다.

- 자신이 저지른 난장판(복잡하고, 어수선한 코드)을 주석으로 설명하려고 애쓰지 말고, 난장판을 치우는 데 애를 써라.

## 코드로 의도를 표현하라!

```
// 직원에게 복지 혜택을 받을 자격이 있는지 검사한다.
if((employee.flags && HOURLY_FLAG) && (employee.age > 65))
```

```
if(employee.isEligibleForFullBenefits())
```

- 주석으로 달려는 설명을 <span style="color:red">함수</span>로 만들어 표현해도 충분하다.

## 좋은 주석

- **정말로 좋은 주석은, 주석을 달지 않을 방법을 찾아낸 주석**

1. 법적인 주석
2. 정보를 제공하는 주석
3. 의도를 설명하는 주석
4. 의미를 명료하게 밝히는 주석
5. 결과를 경고하는 주석
6. TODO 주석
7. 중요성을 강조하는 주석
8. 공개 API Javadocs

### 법적인 주석

- 저작권 정보, 소유권 정보 etc
- 모든 조항 혹은 조건을 열거하는 대신에 표준 라이선스나 외부 문서로 참조로 해결

### 정보를 제공하는 주석

- 기본적인 정보를 주석으로 제공하면 편리하다. (ex) 추상메서드가 반환할 값)

```
// 테스트 중인 Responder 인스턴스를 반환한다.
protected abstract Responder responderInstance();
```

- _코드가 없으므로, 주석으로 제공하는 것 같은데_, 가능하다면 이것 역시 <span style="color:red">함수 이름</span>로 표현 responderBeingTested
- 정규표현식이 시간과 날짜를 뜻한다고 표현한 예제도 있는데, 이 또한 **시간과 날짜를 변환하는 클래스를 통해 표현하는 것**이 좋다.

### 의도를 설명하는 주석

- 결정에 깔린 의도까지 설명
- ex) 오른쪽 유형이므로 정렬 순위가 더 높다. / 스레드를 대량 생성하는 방법으로 경쟁 조건을 만들려고 한다.

### 의미를 명료하게 밝히는 주석

- 인수나 반환값이 표준 라이브러리나 변경하지 못하는 코드에 속할 경우, **의미를 명로하게 밝히는 주석**이 유용하다.
- `assertTrue(a.compareTo(a) == 0) // a == a`
  - compareTo()의 반환값의 의미를 부연설명하는 것으로 보인다.

### 결과를 경고하는 주석

- 다른 프로그래머에게 결과를 경고할 때 사용.
- ex) 여유시간이 충분하지 않다면 실행하지 마십시오. -> @Ignore로 해결 가능
- ```
  public static SimpleDateFormat makeStandardHttpDateFormat(){
    // SimpleDateFormat은 스레드에 안전하지 못하다.
    // 따라서 각 인스터스를 독립적으로 생성해야한다.
    SimpleDateFormat df = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
    df.setTimeZone(TimeZone.getTimeZone("GMT"));
    return df;
  }
  ```
  - _일반적으로 static 메서드는 프로그램 효율을 높이 정적 초기화 함수로 사용하는 경우가 많은데, 위의 예제에서는 thread safe 하지 않으므로 정적 초기화를 하면 안되는 경우이다._

### TODO 주석

- 프로그래머가 필요하다고 여기지만 당장 구현하기 어려운 경우에 사용
- 주기적으로 TODO 주석을 점검해 **없애도 괜찮은 주석은 없애는 것**이 좋다.

### 중요성을 강조하는 주석

- 다른 프로그래머가 보기에 혹은 훗날의 내가 보기에 **자칫 대수롭지 않다고 여겨질 뭔가**의 중요성을 강조하기 위해서 주석을 사용한다.

### 공개 API에서 Javadocs

- 공개 API를 작성한다면, 반드시 훌륭한 Javadocs를 작성해라.

-> 현재까지 좋은 주석의 경우에 대해서 살펴봤는데, 결론은 "최대한 줄일 수 잇는 주석은 줄여라"이다.

## 나쁜 주석

- 대다수의 주석이 포함.

1. 주절거리는 주석
2. 같은 이야기를 중복하는 주석
3. 오해의 여지가 있는 주석
4. 의무적으로 다는 주석 (불필요한 주석)
5. 이력 관리 주석 -> 소스코드 관리
6. 있으나 마나 한 주석 -> 중복 or 노필요
7. 무서운 잡음 -> 불필요한 주석
8. 위치를 표시하는 주석 -> 자주 쓰면 안좋음
9. 닫는 괄호를 표시하는 주석 -> 함수 분리
10. 공로를 돌리거나 저자를 표시하는 주석 -> 소스 코드 관리
11. 주석으로 처리한 코드 -> 소스 코드 관리
12. HTML 코드 -> dock 만드는 도구
13. 전역 정보
14. 너무 많은 정보 -> too much talker
15. 모호한 관계 -> 정보 부족으로 코드랑 연계가 안됨
16. 함수 헤더 -> 함수 이름
17. 비공개 코드에서 javadoc -> 불필요

### 주절거리는 주석

- 프로세스에서 하라고 하니까 마지못해 다는 주석
- 이해가 안 되어 다른 모듈까지 뒤져야 하는 주석

### 같은 이야기를 중복하는 주석

- 함수 헤더에 달린 주석이, 코드 내용을 그대로 중복하는 경우. (코드만 읽어도 이해가 충분히 가능한데, 함수 헤더에 주석을 추가한 경우)

- Tomcat으로부터 가져온 쓸모없고 중복된 Javadocs(변수/함수/클래스 명으로 유추가능한 내용을 주석으로 중복표시)

```
  public abstract class ContainerBAse implements Container, Lifecycle, Pipeline, MBeanRegistration, Serializable {

   /**
   * 이 컴포넌트의 프로세스 지연값
   */
   protected int backgroundProcessorDelay = -1;

   /**
   * 이 컴포넌트를 지원하기 위한 생명주기
   */
   protected LifecycleSupport lifecycle = new LifecycleSupport(this);

  }
```

### 오해할 여지가 있는 주석

- 프로그래머가 **엄밀**하게 주석을 달지 못해서, 오해의 여지를 남기는 경우.

### 의무적으로 다는 주석

- 모든 함수에 Javadocs를 달거나, 모든 변수에 주석을 달아야 하는 규칙
- 위의 Tomcat 예제 참조.
- 쓸데없는 주석은 코드를 헷갈리게 만들거나 복잡하게 만든다.

### 이력을 기록하는 주석

- 소스코드 관리 시스템이 없을때는 유용했으나, 요즘에는 고대 유물
- **완전제거요망**

### 있으나 마나 한 주석

- 너무나 당연한 사실을 언급하며, 새로운 정보를 제공하지 못하는 주석
- 누가봐도 기본생성자인데, 굳이 언급하는 경우

  ```
  /**
  * 기본 생성자
  */
  protected AnnualDateRule() {

  }
  ```

- 프로그래머의 빡침을 담은 주석(ex. 이게 뭐야!!!)

### 무서운 잡음

- 문서를 제공해야한다는 생각으로 생겨난 잡음
- 위의 중복과 의무적으로 다는 주석과의 차이가 뭔지 모르겠음 ㅎㅎ.....
- `private String name; // The name`

### <span style="color:red"> 함수나 변수</span>로 표현할 수 있다면 주석을 달지 마라

- 반복되고 있는 이야기. 주석을 달지 말고, 함수 혹은 변수로 분리해라.
- ```
  // 전역 목록 <smodule>에 속하는 모듈이 우리가 속한 하위 시스템에 의존하는가?
  if (smodule.getDependSubSystems().contains(subSysMod.getSubSystem()))
  ```

  ```
  ArrayList moduleDependees = smodule.getDependSubSystems();
  String ourSubSystem = subSysMod.getSubSystem();
  if (moduleDependees.contains(ourSubSystem))
  ```

- _변수 이름으로 통해 주석 기능을 대신한 것으로 보이는데, 프로그래머가 충분히 이해할 수 있다면 안나누는 것도 괜찮아 보임_

### 위치를 표시하는 주석

- 소스파일에서 특정위치를 표시하려고 사용.
- 적절히 사용하면 좋지만, 남용하지는 말자.

### 닫는 괄호에 다는 주석

- 닫는 괄호에, 어떤 괄호인지를 알려주기 위해 특별하 주석을 달아놓는데, 중첩이 심하고 장황한 함수일 경우에만 의미가 있다.
- 하지만 함수는 최대한 작고 캡슐화되게 구현해야하므로, **닫는 괄호에 주석을 달지 말고, 함수를 쪼개자**

### 공로를 돌리거나 저자를 표시하는 주석

- 이력 관리와 비슷하다. 주석으로 남기지말고 소스 코드 관리 시스템을 이용해라.

### 주석으로 처리한 코드

- 이력관리, 공로 / 저자 표시하는 주석 과 비슷하다.
- 소스 코드 관리 시스템을 이용해라. 소스 코드 관리 시스템이 우리를 대신해 코드를 기억해 줄 것이다.
- **삭제**

### HTML 주석

- Javadocs와 같은 도구로 주석을 모아 웹페이지에 올리것이라면, 주석에 HTML 태그를 삽입하는 책임은 프로그래머가 아닌 **도구** 에 있다.

### 전역 정보

### 너무 많은 정보

- Too much talker
- 주석에 프로토콜 역사나 관련 없는 정보를 쓰지 말아라. 필요하다면 link를 남겨라.

### 모호한 관계

- 주석과 주석이 설명하는 코드 사이에는 **명백한 관계** 가 필요하다.
- 주석으로 코드를 이해하기 위해서는 **추가정보**가 필요하다.
- ```
  /*
   * 모든 픽셀을 담을 만큼 충분한 배열로 시작한다.(여기에 필터 바이트를 더한다).
   * 그리고 헤더 정보를 위해 200 바이트를 더한다.
   */
   this.pngBytes = new byte[((this.width + 1) * this.height * 3) + 200];
  ```

### 함수 헤더

- 짧은 함수는 긴 설명이 필요 없다. <span style="color:red">이름</span>을 잘 붙여라.

### 비공개 코드에서 Javadocs

- 비공개 코드에서는 Javadocs를 작성하지 마라. 코드만 보기싫고 산만해질 뿐이다.
